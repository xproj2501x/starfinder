/**
 * Starfinder - System Manager
 * ===
 *
 * @module system
 */

////////////////////////////////////////////////////////////////////////////////
// Imports
////////////////////////////////////////////////////////////////////////////////
import { MESSAGES } from './constants';

////////////////////////////////////////////////////////////////////////////////
// Definitions
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Class
////////////////////////////////////////////////////////////////////////////////
class SystemManager {

  //////////////////////////////////////////////////////////////////////////////
  // Private Properties
  //////////////////////////////////////////////////////////////////////////////
  /**
   * @private
   * @type {Logger}
   */
  _logger;

  /**
   * @private
   * @type {MessageService}
   */
  _messageService;

  /**
   * Collection of systems registered with the System Manager
   * @private
   * @type {Array}
   */
  _systems;

  /**
   * The name of the module that is currently active
   * @private
   * @type {string}
   */
  _currentModule;

  /**
   * Collection of systems that are currently active
   * @private
   * @type {Array}
   */
  _activeSystems;

  ////////////////////////////////////////////////////////////////////////////////
  // Public Properties
  ////////////////////////////////////////////////////////////////////////////////

  /**
   * SystemManager
   * @constructor
   * @param {object} config - configuration for the system manager
   */
  constructor(config) {
    this._logger = config.LOG_SERVICE.registerLogger(this.constructor.name);
    this._messageService = config.MESSAGE_SERVICE;
    this._messageService.subscribe(MESSAGES.LOAD_MODULE, (message) => this.loadModule(message));
    this._messageService.subscribe(MESSAGES.UNLOAD_MODULE, (message) => this.unloadModule(message));

    this._systems = [];
    this._activeSystems = [];
  }

  ////////////////////////////////////////////////////////////////////////////////
  // Public Methods
  ////////////////////////////////////////////////////////////////////////////////
  /**
   * Loads a new module into the engine
   * @param {object} message - the command message to create a new entity
   * name: module name
   *
   */
  loadModule(message) {

  }

  unloadModule(message) {

  }
  ///////////////////////////////////////////////////////////////////////////////
  // Private Methods
  ///////////////////////////////////////////////////////////////////////////////
  _loadSystem(type) {

  }

  //////////////////////////////////////////////////////////////////////////////
  // Static Methods
  //////////////////////////////////////////////////////////////////////////////
  /**
   * Static factory method
   * @static
   * @param {object} config - configuration for the entity manager
   * @returns {SystemManager}
   */
  static create(config) {
    return new SystemManager(config);
  }
}

////////////////////////////////////////////////////////////////////////////////
// Exports
////////////////////////////////////////////////////////////////////////////////
export default SystemManager;
